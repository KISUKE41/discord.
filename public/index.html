<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <title>Discord 通知フォーム</title>
</head>
<body>
  <h1>Discordにメッセージ送信</h1>
  <form id="form">
    <input type="text" id="message" placeholder="メッセージを入力" required />
    <button type="submit">送信</button>
  </form>
<form id="form">
  <input type="text" id="userid" placeholder="メンションするユーザーID" required />
  <input type="text" id="message" placeholder="メッセージ" required />
  <button type="submit">送信</button>
</form>

  
  <!-- ✅ JSは必ず body の下に -->
<script>

form.addEventListener('submit', async (e) => {
  e.preventDefault();

  const userId = document.getElementById('userid').value;
  const messageText = document.getElementById('message').value;

  const message = `<@${userId}> ${messageText}`;

  const res = await fetch('/api/send', {
    method: 'POST',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify({ message }),
  });

  if (res.ok) {
    alert('送信成功！');
  } else {
    alert('送信失敗…');
  }
});

</script>
